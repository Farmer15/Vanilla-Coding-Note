# Node 환경에서 압축하기, 압축해제 하기 어려운 이유

### 압축하기란? ([참고자료](https://en.wikipedia.org/wiki/Data_compression))

원래 표현보다 적은 비트를 사용하여 정보를 인코딩하는 프로세스로 데이터의 크기를 줄이는 프로세스 입니다.

- 압축을 수행하는 장치 : 인코더
- 압축을 해제하는 장치 : 엔코더
- 함수 또는 알고리즘을 이용하여 항상 개선 될 수 있습니다.
- 두 형태로 나뉠 수 있습니다.
    - **Lossy** **compression**:
        
        손실 압축으로 불필요한 정보를 삭제하고 기존 정보의 복잡성을 줄여 크기를 줄입니다.
        
        - 파일 품질이 저하되는 대신 훨씬 높은 압축률을 달성할 수 있습니다.
    - **Lossless compression:**
        
        무손실 압축으로 통계적 중복을 찾아 제거하여 비트를 제거 합니다. 
        
        - 실제로 정보가 제거되지 않습니다.
        - **Lossy** **compression** 보다 압축 비율이 작지만 데이터가 손상되지 않는다는 이점이 있습니다.
        - 데이터 베이스 정보나 전문 미디어 파일과 같이 절대 품질을 유지해야 할때 중요합니다.

### 압축하기 , 압축해제 기능을 구현하기 힘든이유

1. 복잡한 압축 알고리즘
    - 압축과 압축해제에는 알고리즘이 필요한데 각각의 ZIP, GZIP, BZIP2 등등의 확장자에 따라 알고리즘이 달라집니다.
    - 데이터 패턴을 분석해서 패턴을 찾아내서 중복을 제거하거나 간결한 형태로 표현해야 합니다.
    - 다양한 데이터 유형(텍스트, 이미지, 오디오, 비디오 등)을 각각의 형태로 맞게 압축해야 합니다.(방식이 전부 다름)
    - 비손실 압축 알고리즘에서 데이터를 원본 그대로 복원 시키는 작업에 정교한 알고리즘이 필요합니다.
    - 압축 알고리즘을 짤 때 압축률을 생각하면서도 압축속도 역시 같이 생각해야 합니다.
    - 데이터를 압축하는 동안 메모리와 CPU 리소스 또한 최소화 시켜주어야 합니다.
2. 바이트 레벨의 작업
    - 압축과 압축 해제 작업이 바이트 레벨에서 데이터가 처리 되어 지므로 매우 세밀한 처리가 필요합니다.
    - 엔디안 문제, 비트 마스킹 등의 복잡한 작업을 수작업으로 구현해야 합니다.
        - 엔디안 : 컴퓨터 메모리의 바이트를 특정 순서로 읽는다는 것을 나타냅니다. ([관련 자료](https://www.freecodecamp.org/news/what-is-endianness-big-endian-vs-little-endian/))
            - 빅 엔디안 : **big-end** 를 먼저 저장해서 여러 바이트를 읽을때 첫 번째 바이트가 가장 크므로 왼쪽에서 오른쪽으로 읽는 사람들에게 적합한 방법
            - 리틀 엔디안 : **little-end** 를 먼저 저장해서 여러 바이트를 읽을 때 첫 번째 바이트가 가장 작으므로 오른쪽에서 왼쪽으로 읽는 사람들에게 가장 적합한 방법
        - 비트 마스킹
            - 컴퓨터에서 데이터의 특정 비트를 선택하거나 조작하기 위해 사용하는 기법
                - Mask : 어떤 비트를 선택할지 어떤 비트를 무시할지 결정해주는 역할을 합니다.
                - 연산 : Mask 를 이용해 데이터를 조작하는 방법입니다.(AND, OR, XOR)
    - 이를 위해선 각 바이트의 의미를 정확히 이해하고 처리해야 합니다.
3. 복원과정에서 복잡한 에러처리
    - 압축해제의 일련의 긴 과정에서 여러가지 다양한 오류를 처리해서 최대한 데이터를 복원 시킬 수 있어야 합니다.
4. 운영체제의 다양성
    - 운영체제에 따라 압축하기, 해제하기 알고리즘이 달라지므로 각각의 경우에 대해서 새로운 알고리즘을 다시 짜주어야 합니다.

### 결론

- 하나의 도전이라는 측면에서 라이브러리 도움없이 도전해 볼만한 작업이기는 하지만
    - 프로젝트 특성상 구현하기 까지 시간이 얼마나 걸리지 모르는 도전이고
    - 해당 기능이 저희가 만들고 있는 서비스에 핵심적인 부분도 아닐 뿐더러
    - 이미 구현되어 있는 라이브러리 들이 많이 존재하고
    - 제대로 완성시킬 수 있을지도 미지수이기 때문에
- 따라서 ‘이미 구현이 되어 있는 라이브러리를 사용하는게 낫다’는 결론이 나오게 되었습니다.