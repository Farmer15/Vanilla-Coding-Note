# API 통신

API 통신에 있어서 하나의 작은 기술 스택이기 때문에 정리하였습니다.

### 여러가지 API 기술

https://axios-http.com/kr/docs/intro

https://developer.mozilla.org/ko/docs/Web/API/Fetch_API/Using_Fetch

→**Fetch API → 브라우져 내장**

https://www.npmjs.com/package/superagent
****https://github.com/sindresorhus/got
****https://api.jquery.com/jQuery.ajax/

### API 선택까지 과정

- 서버가 FastAPI 로 Python 기반 환경이기 때문에 Node 기반에서 사용하는 **Got**(❌) 은 사용하지 않았습니다
    
    → 추가로 클라이언트는 React Native 로 클라이언트 사이드 렌더링 방식을 사용하고 있으므로도 사용하지 않았습니다.
    
- 만드는 프로젝트 단순 HTTP 요청만 이루어지기 때문에 상대적으로 큰 라이브러리인 **jQuery.ajax(**❌**)** 는 사용하지 않았습니다.
    
    → 추가로  **jQuery.ajax(**❌**)** 경우 현대적인 프레임워크와 라이브러리인 React, Vue, Angula 는 자바스크립트의 최신 문법을 따르는 대신 jQuery 방식을 사용하기 때문에 최신 기술과는 적합하지 않다고 판단하였습니다.
    
- **SuperAgent(**❌**)** 경우는 아래와 같은 이유로 사용하지 않았습니다.
    - 모르는 기술이기 때문에 문서화 또는 커뮤니티가 잘 되어 있어야 배우는데 오래걸리지 않고 문제를 해결하는데 오랜시간이 들지않는데 **SuperAgent(**❌**)** 경우 문서화, 커뮤니티가 부족하기 때문에 선택하지 않았습니다.
    - **SuperAgent(**❌**)** 경우 버그수정, 업데이트가 상대적으로 느리게 이루어지기 때문에 어떤 문제상황이 나올줄 모르고 나온다고 해서 버그 수정이 안되어 있을 수도 있기때문에 선택하지 않았습니다
    - 만드는 프로젝트에서 문제를 분석해서 풀이를 설명해주는 과정에서 웹 소켓이 사용될 수 있기때문에 웹 소켓을 지원하지 않는 **SuperAgent(**❌**)** 경우는 선택하지 않았습니다.
- 마지막으로 중요한 **Fetch** vs **Axios** 차이
    - 제공
        - **Fetch** 경우: 기본으로 브라우져에서 제공해주기 때문에 추가적인 종속성이 없습니다.
        - **Axios** 경우: 외부 라이브러리로 의존성 설치가 필요합니다.
            
            ```jsx
            npm install axios
            ```
            
    - 응답처리 방식
        - **Fetch** 경우: JSON으로 변환시켜주지 않기 때문에 `json()` 메서드를 호출해서 변환시켜주어야 하고
        - **Axios** 경우: 자동으로 JSON으로 변환시켜주기 때문에 별도의 작업이 필요 없습니다.
        
        - 공통적으로 둘다 promise 기반이기 때문에 `async/await` 를 사용할 수 있어서 에러처리, 동기적 처리, 등 비동기 처리하는데 있어서 용이합니다.
    - 에러처리 방식
        - **Fetch** 경우: 에러코드 400, 500 번대를 수신하여도 에러로 던지지 않기 때문에 따로 처리를 해주어야 하지만
        - **Axios** 경우:  200 번대를 제외한 나머지 모두 에러로 자동으로 던져주기 때문에 별 다른 처리를 해줄 필요가 없습니다.
    - 설정
        - **Fetch** 경우: 매요청마다 디테일하게 설정을 해주어야 하지만,
        - **Axios** 경우: 전역 설정을 해놓았을 경우 동일한 설정에 대해서 여러번 반복해서 설정하지 않아도 됩니다.
    - 그 외에도 **Axios** 경우 HTTP 메서드 제공과 요청 취소 토큰, 상태 추적등을 제공하여 좀 더 편의성을 제공해줍니다.
- 차이라고 적었지만 **Axios(👑)**  경우 **Fetch API** 요청을 좀 더 도와주는 라이브러리이기 때문에 사용할 지 안 할지를 생각해서 판단하였습니다.
    - 만드는 프로젝트에서 수학문제 분석을 요청보내고 유저측에서 취소하고 싶을 수 있기 때문에 **Axios(👑)**  사용하는 것을 선택하였습니다.
    - 또 분석요청시 오랜시간이 걸리수 있기 때문에 요청시간 타임을 설정할 수 있는 **Axios(👑)**  사용하는 것을 선택하였습니다.
    - FastAPI 특성상 RESTful API 에 최적화 되어 있기 때문에 HTTP 요청을 도와주기에 **Axios(👑)** 사용하는 것을 선택하였습니다.